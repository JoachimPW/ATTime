@model ATTime.Models.CourseCalender
@using ATTime.Models.ViewModel
@using ATTime.Models



<div class="col_7 blue_tab border-dark row" style="curser:pointer;">
    <div class="calender_header l_blue text-center pt-1 pb-1 border-dark col-12">
        <h5 class="m-auto mt-1">@Model.Calender.CalenderName</h5>
    </div>
    <div id="@Model.CalenderId" class="@Model.CalenderId blue_tab_under w-100">
        @if (Model.CourseId == 1)
        {
            <p class="m-auto">Add course:</p>
            <div class="m-auto">
                @using (Html.BeginForm("AddCourse", "TeacherView", FormMethod.Post))
                 {
                    <input type="hidden" value="@ViewData["team"]" name="teamid" />
                    <input type="hidden" name="calendercourseid" value="@Model.CourseCalenderId" />
                    <select name="Courseid" class="SelectList p-2 bg-transparent haps">
                        @foreach (CourseOperator c in ViewBag.CO)
                        {
                            <option value="@c.CourseId">@c.Course.CourseName</option>
                        }
                    </select>
                    <button type="submit" class="btn btn-default m-1 p-1 modalBtn text-light haps">Add</button>
                 }
            </div>

        }
        else
        {
           <div class="m-auto">
                <h6 class="m-auto mt-1">@Model.Course.CourseName</h6>
                <p id="@Model.CourseCalenderId" class="att_text">See attendance</p>
                <script>
                    $("#@Model.CourseCalenderId").click(function () {
                        var TeamID = @Model.TeamId;
                        var date = @Model.CalenderId;
                        var courseid = @Model.CourseId;
                        $.ajax({
                            type: "POST",
                            url: "@Url.Content("~/TeacherView/attend")",
                            data: { TeamID: TeamID, date: date, courseid: courseid },
                            success: function (response) {
                                $("#data").html(response);
                                $("#data").addClass("show");
                        }
                        });
                    });
                </script>
            </div>
        }
    </div>
    <script>
        if (@Model.CalenderId == @ViewBag.today) {
            $("#@Model.CalenderId").addClass("d_blue text-light w-100");
            $(".SelectList").addClass("text-light");
            $(".att_text").addClass("text-light");
        }
        else if (@Model.CalenderId < @ViewBag.today) {
            $(".SelectList").addClass("text-dark");
            $(".att_text").addClass("text-dark");
        }
</script>
</div>



