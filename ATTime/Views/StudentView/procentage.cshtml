@using ATTime.Models
@using ATTime.Models.ViewModel
@{
    ViewBag.Title = "procentage";
}
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<h2>Absence</h2>

<div class="row">
    @foreach (CourseStudent c in ViewBag.course)
    {
    <div class="col-3">
        <div id="@c.Course.CourseName"></div>
        <script type="text/javascript">
            // Load google charts
            google.charts.load('current', { 'packages': ['corechart'] });
            google.charts.setOnLoadCallback(drawChart);

            // Draw the chart and set the chart values
            function drawChart() {
                var data = google.visualization.arrayToDataTable([
                    ['Absence', 'Procentage for absence'],
                    ['Absence', @Studencount.total_absent_course(c.StudentId, c.CourseId) ],
                    ['Attendance', 100 - @Studencount.total_absent_course(c.StudentId, c.CourseId)],
                ]);

                // Optional; add a title and set the width and height of the chart
                var options = { 'title': '@c.Course.CourseName absences', 'width': 80%, 'height': 'auto' };

                // Display the chart inside the <div> element with id="piechart"
                var chart = new google.visualization.PieChart(document.getElementById('@c.Course.CourseName'));
                chart.draw(data, options);
            }
        </script>
    </div>
    }
</div>






