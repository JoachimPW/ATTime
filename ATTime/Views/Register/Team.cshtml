@model ATTime.Models.Team

@{
    ViewBag.Title = "Teacher";
}

@Html.ActionLink("Admin View", "Index", "AdminView")

@Html.Partial("_AdminNav")

@using (Html.BeginForm("CreateTeam", "Register", new { ReturnUrl = ViewBag.ReturnUrl }, FormMethod.Post, new { @class = "form-horizontal", role = "form" }))
{
    @Html.AntiForgeryToken()
    @Html.ValidationSummary(false)

    <div class="display-5">
        <h2> Create Team </h2>
        <div class"">
            @Html.LabelFor(model => model.TeamName, new { @class = "" })
            @Html.TextBoxFor(model => model.TeamName, new { @class = "form-control", @onkeyup = "UserCheck()" })
            @Html.ValidationMessageFor(model => model.TeamName)
            <p id="Status"></p>
        </div>
        <br />
    </div>
    <div class="form-group">
        <div class="">
            <button type="submit" id="submitForm" class="btn btn-default m-1 p-1 btn-success" asp-action>Create</button>
        </div>
    </div>
}

@Html.Partial("CreateCourse")


<script>
    function UserCheck() {
        $("#Status").html("Checking...");
        $.post("@Url.Action("CheckTeamNameAvailability", "Register")",
            {
                userdata: $("#TeamName").val()
            },
        function (data) {
            if (data == 0) {
                $("#Status").html('<font color="Green">Teamname is available.</font>');
                $("#TeamName").css("border-color", "Green");
                $("#submitForm").prop("disabled", false);
            }
            else {
                $("#Status").html('<font color="Red">Team already exists.</font>');
                $("#TeamName").css("border-color", "Red");
                $("#submitForm").prop("disabled", true);
            }
        });
    }
</script>